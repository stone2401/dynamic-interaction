# 功能需求文档: 修复图片上传缺失 `mimeType` 错误

> 本文档列出了用户视角的需求，**不包含任何技术实现细节**。

## R1. 单张图片上传
* **用户故事**: 作为一名 AI 交互用户，当我在反馈窗口上传一张图片时，系统应正确接收并处理，无报错。
* **验收标准**:
  1. 当用户上传符合规范的 base64 图片字符串时，系统返回成功，且工具调用无 "image data or mimeType is missing" 报错。
  2. 返回内容包含 `type: "image"`、`data` 及 `mimeType` 字段。
  3. 系统日志记录成功接收图片，且不含异常堆栈。

## R2. 多张图片上传
* **用户故事**: 作为一名 AI 交互用户，当我一次上传多张图片时，系统应全部接收并逐一返回。
* **验收标准**:
  1. 支持数组形式的 `imageData`，多张图片均被转换为带 `mimeType` 的对象。
  2. 所有图片均被成功解析并返回，无遗漏、无报错。
  3. 系统日志显示已处理的图片数量与用户上传一致。

## R3. 回退与兼容
* **用户故事**: 作为一名 AI 交互用户，当我上传缺少 `data:image/` 头的 base64 图片时，系统应使用默认 `image/png` MIME 类型，仍可成功处理。
* **验收标准**:
  1. 在缺失 MIME 信息的情况下，系统自动填充 `mimeType: "image/png"` 并成功返回。
  2. 日志中包含自动填充提示，不影响正常流程。
  3. 仍无 "image data or mimeType is missing" 报错。
